{% extends "base.html" %}

{% block content %}
<h2>Fach hinzufügen</h2>

<form method="post">

  <label>Fach:</label><br>
  <select name="subject" id="subject" required>
    <option value="">Bitte wählen</option>
    <option value="Sport">Sport</option>
    <option value="Physik">Physik</option>
    <option value="Musik">Musik</option>
    <option value="Mathematik">Mathematik</option>
    <option value="Informatik">Informatik</option>
    <option value="Geschichte">Geschichte</option>
    <option value="Geographie">Geographie</option>
    <option value="Englisch">Englisch</option>
    <option value="Deutsch">Deutsch</option>
    <option value="Chemie">Chemie</option>
    <option value="Bildnerisches Gestalten">Bildnerisches Gestalten</option>
  </select><br><br>

  <label>Lehrer:</label><br>
  <select name="teacher" id="teacher" required>
    <option value="">Bitte zuerst Fach wählen</option>
  </select><br><br>

  <label>Raum:</label><br>
  <input type="text" name="room" id="room" readonly><br><br>

  <label>Wochentag:</label><br>
  <select name="weekday" required>
    <option value="1">Montag</option>
    <option value="2">Dienstag</option>
    <option value="3">Mittwoch</option>
    <option value="4">Donnerstag</option>
    <option value="5">Freitag</option>
  </select><br><br>

  <label>Zeitblock:</label><br>
  <select name="timeblock" required>
    <option value="08:45-09:25">08:45 – 09:25</option>
    <option value="09:35-10:20">09:35 – 10:20</option>
    <option value="10:35-11:20">10:35 – 11:20</option>
    <option value="11:30-12:15">11:30 – 12:15</option>
    <option value="13:20-14:05">13:20 – 14:05</option>
    <option value="14:15-15:00">14:15 – 15:00</option>
  </select><br><br>

  <button type="submit">Speichern</button>

</form>

<script>
document.addEventListener("DOMContentLoaded", function() {

  // Lehrer + Räume direkt im Code
  const daten = {
    "Sport": [
      { name: "Claudia Imhof", raum: "418" },
      { name: "Marco Sabbatini", raum: "404" }
    ],
    "Physik": [
      { name: "Caroline Haug", raum: "423" },
      { name: "Dr. Axelle Krayenbühl-Tapponnier", raum: "618" },
      { name: "Patrik Weber", raum: "601" }
    ],
    "Musik": [
      { name: "Hansueli Bamert", raum: "415" }
    ],
    "Mathematik": [
      { name: "Dr. Jan-Mark Iniotakis", raum: "606" },
      { name: "Anh Huy Truong", raum: "424" }
    ],
    "Informatik": [
      { name: "Luca Egli", raum: "401" },
      { name: "Lars Rafeldt", raum: "505" },
      { name: "Dr. Thomas Preu", raum: "614" }
    ],
    "Geschichte": [
      { name: "Dr. Sebastian Bott", raum: "609" },
      { name: "Valentin Schönherr", raum: "516" },
    
    ],
    "Geographie": [
      { name: "Philipp Rüdisühli", raum: "520" },
      { name: "Christian Schmidteter", raum: "421" }
    ],
    "Chemie": [
      { name: "Dr. Christian Ammann", raum: "614" },
      { name: "Dr. Jonas Halter", raum: "606" }
    ],
   
  };

  const subjectSelect = document.getElementById("subject");
  const teacherSelect = document.getElementById("teacher");
  const roomInput = document.getElementById("room");

  // Wenn Fach gewählt wird → Lehrer laden
  subjectSelect.addEventListener("change", function() {
    const fach = this.value;
    teacherSelect.innerHTML = "";
    roomInput.value = "";

    if (!daten[fach] || daten[fach].length === 0) {
      teacherSelect.innerHTML = '<option value="">Keine Lehrer verfügbar</option>';
      return;
    }

    daten[fach].forEach(lehrer => {
      const option = document.createElement("option");
      option.value = lehrer.name;
      option.textContent = lehrer.name;
      teacherSelect.appendChild(option);
    });
  });

  // Wenn Lehrer gewählt wird → Raum anzeigen
  teacherSelect.addEventListener("change", function() {
    const fach = subjectSelect.value;
    const lehrerName = this.value;

    const lehrer = daten[fach].find(l => l.name === lehrerName);
    roomInput.value = lehrer ? lehrer.raum : "";
  });

});
</script>

{% endblock %}
