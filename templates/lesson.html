{% extends "base.html" %}

{% block content %}
<h2>Fach hinzufügen</h2>

{% if error %}
<div style="background-color: rgba(220, 53, 69, 0.1); color: #dc3545; padding: 10px; margin-bottom: 15px; border: 1px solid rgba(220, 53, 69, 0.3); border-radius: 4px;">
  {{ error }}
</div>
{% endif %}

<form method="post">

  <label>Fach:</label><br>
  <select id="subjectSelect" name="subject" required onchange="toggleCustomInput()">
    <option value="">-- Fach auswählen --</option>
    <option value="Mathematik">Mathematik</option>
    <option value="Deutsch">Deutsch</option>
    <option value="Englisch">Englisch</option>
    <option value="Französisch">Französisch</option>
    <option value="Geschichte">Geschichte</option>
    <option value="Geografie">Geografie</option>
    <option value="Biologie">Biologie</option>
    <option value="Chemie">Chemie</option>
    <option value="Physik">Physik</option>
    <option value="Informatik">Informatik</option>
    <option value="Wirtschaft & Recht">Wirtschaft & Recht</option>
    <option value="Musik">Musik</option>
    <option value="Bildnerisches Gestalten">Bildnerisches Gestalten</option>
    <option value="Sport">Sport</option>
    <option value="custom">Anderes (Ergänzungsfach)</option>
  </select><br>
  <input type="text" id="customSubject" name="custom_subject" placeholder="Eigenes Fach eingeben" style="display:none; margin-top: 10px;"><br><br>
  
  <script>
    function toggleCustomInput() {
      const select = document.getElementById('subjectSelect');
      const customInput = document.getElementById('customSubject');
      
      if (select.value === 'custom') {
        customInput.style.display = 'block';
        customInput.required = true;
        select.removeAttribute('name');
        customInput.setAttribute('name', 'subject');
      } else {
        customInput.style.display = 'none';
        customInput.required = false;
        customInput.removeAttribute('name');
        select.setAttribute('name', 'subject');
      }
    }
  </script>

  <label>Raum:</label><br>
  <input type="text" name="room" required><br><br>

  <label>Farbe:</label><br>
  <input type="color" name="color" value="#3498db" style="width: 100px; height: 40px; border: none; border-radius: 4px; cursor: pointer;"><br><br>

  <label>Wochentag:</label><br>
  <select name="weekday" required>
    <option value="1">Montag</option>
    <option value="2">Dienstag</option>
    <option value="3">Mittwoch</option>
    <option value="4">Donnerstag</option>
    <option value="5">Freitag</option>
  </select><br><br>

  <label>Zeitblock:</label><br>
  <select name="timeblock" required>
    <option value="08:45-09:25">08:45 – 09:25</option>
    <option value="09:35-10:20">09:35 – 10:20</option>
    <option value="10:35-11:20">10:35 – 11:20</option>
    <option value="11:30-12:15">11:30 – 12:15</option>
    <option value="13:20-14:05">13:20 – 14:05</option>
    <option value="14:15-15:00">14:15 – 15:00</option>
  </select><br><br>

  <button type="submit">Speichern</button>

</form>
{% endblock %}
